# Introduction

The `osx` target generates a `.pkg` file, optionally codesigned, that installs a series of `.keylayout` files for each layout provided in the project.

To sign the package, specify the `-R` flag while building.

This target can only be generated on a macOS system.

# Dependencies

* lxml
* PyYAML
* ImageMagick

# Target-specific configuration

## Project properties

```yaml
targets:
  osx:
    bundleName: "Brendan's Keyboards"
    packageId: so.brendan.keyboards.sami
    codeSignId: "macOS Installer Certificate ID (find in your Keychain)"
    icon: any.png
    version: "1.0.0" # should follow x.y.z format
    resources: path/to/resources # optional
    welcome: welcome.txt # or .html or .rtf; optional
    readme: readme.txt # or .html or .rtf; optional
    license: license.txt # or .html or .rtf; optional
    conclusion: conclusion.txt # or .html or .rtf; optional
    background: background.png # or .jpg; optional
```

`icon` will be converted into an `.icns` file.

`codeSignId` must be for a macOS installer distribution certificate, generated by the Team Agent.

Resources can be localised. Place readme, welcome, license and conclusion files into `zz.lproj` directories inside the resources directory, where `zz` represents a supported language code. Place the background image into the root of the resources directory.

## Keyboard descriptor properties

The macOS target supports a few custom modes to facilitate the differences between macOS keyboards and others. Particularly, the `cmd` key is macOS specific.

Therefore, macOS specific modes are supported with the `osx-` prefix.

It is important to supply at least an `osx-cmd` mode otherwise the `cmd` key will have no function whatsoever.

If you wish to use your `iso-default` mode as the `osx-cmd` mode (which is the sanest default), you can use YAML referencing:

```yaml
iso-default: | &default
  my keyboard here
osx-cmd: *default
```

